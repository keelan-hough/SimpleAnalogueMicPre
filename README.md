# SimpleAnalogueMicPre
This is a simple analogue mic pre I designed and built for an assignment in my second year of university. Attatched is the LTSpice files, diagrams and actual circuit photos as well as a report detailing the desing and function of each section of the unit.


This is a report on the design and building of my 500 series microphone preamplifiers. It will break down the timeline for the development of my board, as well as an analysis of the parts of the circuit and how they work. 
The process overall went well, with my preamp following all specifications and everything I built working and helped my understanding of the theory behind electronics now that I have applied the information. 

The preamp follows the specifications in the brief and has an input impedance of 1.5k ohms, an output impedance of less than 200 ohms, and each component is working correctly. 
Going into the project I decided to work through it in the same order the signal would pass through it, starting at the input stage and the pad, then the differential amplifier, then the rumble filter, next the gain, and then going through to the output stage. This helped me to build the later components because they would be designed around the previous modules, and how they sat on the board. It felt more like designing and building an amp instead of assembling a kit. 
I also made sure to utilise software like LTSpice to plan the board ahead of time as well as test different values of components to see how they affected the result. This also allowed me to design components which would not end up on the final board. 
To ensure the build got completed in enough time, accounting for testing and mistakes, I made a time plan for development which helped significantly in getting the project’s production organised. 

The mic pre has a 20dB pad, which is switchable. I attached the pad to switch 2 of the preamp dev kit as it was a dual pad, meaning it activated 2 switches. The pad itself is a passive attenuator, comprised of 3 resistors. 2 in series and a shunt resistor. 
I designed the shunt to be 150 ohms because, you try to make the shunt’s resistance equal to the source. I used the impedance of the Shure SM58 as a baseline for this preamp. 
With the value of the shunt, I could work out the series resistors. It makes the pad simpler to make both series resistors equal. The overall resistance of the pad is what determines the impedance of the input, and for voltage transfer, the impedance of the receiver needs to be 10 times that of the source, so I know the sum of the series resistors and the shunt needs to be 1500Ohms, and I know the shunt is 150Ohms so it was simple enough to work out the values of the series resistors to 675 Ohms. The closest value I could find is 680Ohms, which I used for the circuit. 
To double-check that I had the right attenuation for the pad, I had to work out the amplification factor of the pad. For 20dB, I need 20log20, which is equal to 10 to the power 20/20, which comes to 10. 
To calculate the amplification factor of the actual pad, I put my resistor values into the equation 1-2Rs/Rsh which gave me an amplification factor of 10.067, which isn’t exactly 10, which is why upon testing, we wouldn’t get exactly 20dB of gain reduction, however, it is within a reasonable range, and the difference between this and 20dB should be inaudible. 

The pad feeds into a differential amplifier to take the attenuated balanced signal and convert it into an unbalanced signal which can be processed by the board. It does this by taking the positive and negative signals from the switchable pad and running them through the non-inverting and inverting inputs of an opamp, this amp used the TL072 opamp, which outputs the difference between the two. 
Ideally, this would produce an inaudible amount of gain, as I do not want to change much at this stage. To get a gain factor of 1, I made sure to use 1kOhm resistors. The resistors also determine the input impedance of the amp, which by the specification needed to be 1.5kOhms – 2.2kOhms, and so by using two 1kOhm resistors I ensured my input impedance was at approximately 2kOhms so that the signal could pass through from the pad to the differential amp. 

The differential amplifier gets fed into a rumble filter, which is an 80Hz low pass filter that should eliminate any noise from the microphone, and anything added by the differential amplifier. It does this by attenuating only the lower frequencies. 
The design is an active filter, or a Sallen-Key filter, which uses a TL072 opamp to filter the signal. The capacitors are 150 nano-farads and were picked because they are a reasonable value for a filter and, when calculating resistor values, resulted in simple values for the resistors.  
I designed the filter ahead of time in LTSpice to give myself an idea as to how to build the filter as well as easily calculate the values without having to swap physical components. The design is fed a 1kHz sine wave with 1-volt peak-to-peak, AC amplitude of 1 and an impedance of 180 Ohms. This is to try and emulate a Shure SM58 because that is a quite common microphone and was the impedance I designed the input stage around.  
When I came to building the filter onto the 500 series kit, I used an 18 kOhm resistor for R2, and an 8.2 kOhm resistor for R1 as the value was close enough to not make a stark difference to the cut-off frequency. 

The rumble filter feeds into the gain stage, which boosts the signal by approximately 63dB, as specified in the assignment brief. 
There are two differential amplifiers in the gain stage, one which has an amplification factor of 5, and one with an amplification factor of 400. I split the gain stage into 2 amps, so I could make R1 2 kOhms, which makes the input impedance 10x that of the output impedance of the filter which is the standard for transferring signal. On top of this splitting the signal and running it through two inverting amplifiers gives the signal the same polarity as went in. 
R4 in the circuit as shown below is variable resistor 7 on the 500 series circuit boards, which gives the user the option to vary the gain needed depending on the microphone. This alongside the pad gives for good control over the overall gain of the circuit.  

I had designed a bandpass for the preamplifier which consists of a high pass and a low pass filter. They have a cut-off frequency of approximately 60Hz and 2kHz respectively as specified in the brief. I have the low pass feed into the high pass, which was not by design it was just the order in which it got designed, and uses the TL072 opamp, making this an active filter. 
The circuit works similarly to the rumble filter, with the high pass part of the bandpass being almost identical, and the high pass just having the positioning of the capacitors and the resistors swapped. The values are different due to the different cut-off frequencies in the specification. The filters also had to be designed to accommodate the fact that they would be, if built, making use of the 10k potentiometers on the 500 series. 
The circuit uses 5nF and 300nF capacitors for the high pass and low pass, respectively. The circuit looks different to the rumble filter because I am using 2 resistors instead of 1. This is because the circuit is designed to make use of the 10k dual pole variable resistor pots on the 500 series board, and I do not want the resistor values to go down to 0, so I have an extra resistor to make the cut-off frequency meet specification and keep the resistance from reaching 0. The lowpass circuit uses a 3k resistor whereas the high pass only uses 680Ohm resistors. 
The filter was designed in LTSpice but was not built to the 500 series kit because there was no room on the board, however since the circuit is designed with calculated values, it would be simple to build if needed. 

The signal from the gain stage is split off and sent to 2 different amps, one is an inverting configuration amplifier, and one is a non-inverting amplifier. All 4 resistors in the output stage are 10K ohms. This turns the unbalanced signal into a balanced output that can be sent through the outputs of the 500 series. 
The output stage has a gain factor of 1 thanks to the values of the resistors being the same, so should not be boosting the signal by any audible amount. This is important to keep the overall gain of the circuit within specification. 

The preamp works fully, with the inputs, outputs and power routed from the sideboard, and the switchable pad and rumble filter attached to switches 2 and 1, respectively. 
The designs for the circuits on LTSpice helped the development, as I was able to see the cut-off values and the voltages quicker and easier than if I had planned and tested on physical hardware, and this meant that when I got to building the circuit, I already had the values and an idea of how roughly the circuit was going to sit on the board. 

I ran the simulated circuit in LTSpice, performing an AC analysis on the filter, which I set to perform an octave sweep, with 10 points per octave from 20Hz to 20kHz since that is the range of human hearing. 
The simulation was run with the variable resistors turned all the way up (10kOhms), which gives a high-pass cut-off of 60Hz, and a low-pass cut-off of 2kHz. 
The frequency response of the band-pass is adjustable if the variable resistors were adjusted but because that is not a feature in LTSpice, the plotting was done at the extremes of the resistor, which was 10k. 

The rumble filter was put through the same sine sweep, along the same frequencies, giving a -3dB drop-off point of 80Hz, which was desired for the assignment.  
The rumble filter was easier to test and plot than the bandpass due to it being a fixed cut-off frequency and was.  

The gain stage of the circuit was run through a 2m long transient analysis, with 10 mV sent into the circuit. 
For the simulation, it was run as if the value was turned all the way up (10kOhms), and gave an amplification of approximately 60dB, which is within the bound specified in the brief, taking the signal to 1.2V. 

During building, while I had calculated values for the filter, I accidentally built the gain stage before the high-pass, and so in the final build, there is a cable cutting across the board in an unclean fashion. If I were to complete the assignment again, I would spend more time, in the beginning, designing, and planning how the circuit would fit on the breadboard, and planning routes so there would be fewer long cables running around the 500 series for both presentations as well as to prevent noise that could be introduced by the long cable run. 
This also happened with the output stage, which was on the opposite side of the board to the output plug of the 500 series kit, and so I had to run a cable through the break in the breadboard, as seen below to try keep it as neat as possible and prevent it from catching onto anything, however, this did result in a cable run that was longer than would have been ideal to prevent as much noise as possible. 

For testing the actual build, I used the Keysight 33500B Series Waveform Generator, and used a 1kHz sine wave, with 1 volt, peak-to-peak, an offset of 0V and a phase of 0 degrees. 
To read the output of the build I ran the signal out of the circuit into the Keysight Infini-Vision, DSO-X 2002A oscilloscope. The display, as seen below, shows a 1V signal being sent in, with the gain set at 9 o'clock, boosting the signal by 20db, without distorting.  

In conclusion, the pre-amp overall was successful, converting a balanced signal to an unbalanced signal, which can be attenuated and boosted as needed, making use of the 500 series board and the components it comes with such as switches and variable resistors. On top of that, all components making up the preamp are fully compliant with the brief.  
The cables connecting components were trimmed and shaped to try and keep the circuit as neat as possible, to help visualise the signal flow as well as to reduce noise that could be introduced from long cables acting as an antenna and muddying up the signal. 
I would like to do further work regarding electronics as a whole and ideally would like to build the bandpass that was designed for the circuit but never implemented. Also, the work done here has helped me understand developing as well as designing audio equipment, and how to use the hardware in the labs, which makes starting more electronics projects more inviting. 
